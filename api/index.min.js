const nodemailer = require("nodemailer");
async function main(e) {
  let a = nodemailer.createTransport({
      host: "smtp.ukr.net",
      port: 465,
      secure: !0,
      auth: { user: process.env.EMAIL, pass: process.env.PASSWORD },
    }),
    s = await a.sendMail({
      from: "test202311@ukr.net",
      to: "dotafight@gmail.com",
      subject: "Передзвоніть мені!",
      text: `tel: ${e?.phone}, name: ${e?.name}, email: ${e?.email}`,
      html: `tel: ${e?.phone ? e?.phone : "дані відсутні"}, name: ${
        e?.name ? e?.name : "дані відсутні"
      }, email: ${e?.email ? e?.email : "дані відсутні"}`,
    });
  console.log("Message sent: %s", s.messageId);
}
const express = require("express"),
  app = express();
app.use(express.json()),
  app.use(express.urlencoded({ extended: !0 })),
  console.log("checkpoint1"),
  app.post("/api/form", async (e, a) => {
    await main(e.body), a.sendStatus(200);
  });
